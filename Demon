--// DemonUI V2
--// Inspired by Rayfield
--// PC + Mobile Supported
--// Demon / Modern Theme

local DemonUI = {}
DemonUI.__index = DemonUI

--// Services
local UIS = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")

--// Themes (7)
local Themes = {
    DemonRed = Color3.fromRGB(255, 30, 30),
    HellPurple = Color3.fromRGB(170, 0, 255),
    AbyssBlue = Color3.fromRGB(0, 160, 255),
    BloodPink = Color3.fromRGB(255, 0, 140),
    ToxicGreen = Color3.fromRGB(90, 255, 90),
    InfernoOrange = Color3.fromRGB(255, 120, 0),
    GhostWhite = Color3.fromRGB(240, 240, 240)
}

local CurrentTheme = Themes.DemonRed

--// Utils
local function Tween(obj, time, props)
    TweenService:Create(obj, TweenInfo.new(time, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), props):Play()
end

--// Create Window
function DemonUI:CreateWindow(cfg)
    local self = setmetatable({}, DemonUI)

    self.Title = cfg.Title or "DemonUI"
    self.Description = cfg.Description or "Born from Hell"
    self.KeySystem = cfg.KeySystem or false
    self.Key = cfg.Key or "DEMON"

    --// GUI
    local GUI = Instance.new("ScreenGui", game.CoreGui)
    GUI.Name = "DemonUI"
    GUI.ResetOnSpawn = false

    --// Main
    local Main = Instance.new("Frame", GUI)
    Main.Size = UDim2.fromOffset(520, 380)
    Main.Position = UDim2.fromScale(0.5, 0.5)
    Main.AnchorPoint = Vector2.new(0.5, 0.5)
    Main.BackgroundColor3 = Color3.fromRGB(5,5,5)
    Main.BorderSizePixel = 0
    Main.Active = true
    Main.Draggable = true

    --// Corner
    Instance.new("UICorner", Main).CornerRadius = UDim.new(0,14)

    --// Glow
    local Stroke = Instance.new("UIStroke", Main)
    Stroke.Color = CurrentTheme
    Stroke.Thickness = 1.5
    Stroke.Transparency = 0.2

    --// Topbar
    local Top = Instance.new("Frame", Main)
    Top.Size = UDim2.new(1,0,0,60)
    Top.BackgroundTransparency = 1

    local Title = Instance.new("TextLabel", Top)
    Title.Text = self.Title
    Title.Font = Enum.Font.GothamBlack
    Title.TextSize = 24
    Title.TextColor3 = CurrentTheme
    Title.BackgroundTransparency = 1
    Title.Position = UDim2.fromOffset(16,6)
    Title.Size = UDim2.new(1,-20,0,28)
    Title.TextXAlignment = Left

    local Desc = Instance.new("TextLabel", Top)
    Desc.Text = self.Description
    Desc.Font = Enum.Font.Gotham
    Desc.TextSize = 14
    Desc.TextColor3 = Color3.fromRGB(180,180,180)
    Desc.BackgroundTransparency = 1
    Desc.Position = UDim2.fromOffset(16,32)
    Desc.Size = UDim2.new(1,-20,0,22)
    Desc.TextXAlignment = Left

    --// Tabs
    local TabHolder = Instance.new("Frame", Main)
    TabHolder.Position = UDim2.fromOffset(10,70)
    TabHolder.Size = UDim2.fromOffset(130,300)
    TabHolder.BackgroundTransparency = 1

    local TabLayout = Instance.new("UIListLayout", TabHolder)
    TabLayout.Padding = UDim.new(0,6)

    --// Pages
    local Pages = Instance.new("Frame", Main)
    Pages.Position = UDim2.fromOffset(150,70)
    Pages.Size = UDim2.fromOffset(360,300)
    Pages.BackgroundTransparency = 1

    self.Pages = Pages
    self.TabHolder = TabHolder
    self.CurrentPage = nil

    --// Notification
    function self:Notify(txt)
        local N = Instance.new("TextLabel", GUI)
        N.Size = UDim2.fromOffset(300,40)
        N.Position = UDim2.fromScale(0.5,0.9)
        N.AnchorPoint = Vector2.new(0.5,0.5)
        N.BackgroundColor3 = Color3.fromRGB(10,10,10)
        N.Text = txt
        N.TextColor3 = CurrentTheme
        N.Font = Enum.Font.GothamBold
        N.TextSize = 16
        N.BackgroundTransparency = 0
        Instance.new("UICorner", N).CornerRadius = UDim.new(0,10)
        Tween(N,0.3,{BackgroundTransparency = 0})
        task.delay(2,function()
            Tween(N,0.3,{TextTransparency=1,BackgroundTransparency=1})
            task.wait(0.4)
            N:Destroy()
        end)
    end

    --// Create Tab
    function self:CreateTab(name, icon)
        local Tab = Instance.new("TextButton", TabHolder)
        Tab.Size = UDim2.fromOffset(130,40)
        Tab.Text = name
        Tab.Font = Enum.Font.GothamBold
        Tab.TextSize = 16
        Tab.TextColor3 = Color3.fromRGB(180,180,180)
        Tab.BackgroundColor3 = Color3.fromRGB(10,10,10)
        Instance.new("UICorner", Tab).CornerRadius = UDim.new(0,10)

        local Page = Instance.new("ScrollingFrame", Pages)
        Page.Size = UDim2.fromScale(1,1)
        Page.CanvasSize = UDim2.new(0,0,0,0)
        Page.ScrollBarImageTransparency = 1
        Page.Visible = false

        local Layout = Instance.new("UIListLayout", Page)
        Layout.Padding = UDim.new(0,8)

        Tab.MouseButton1Click:Connect(function()
            if self.CurrentPage then
                self.CurrentPage.Visible = false
            end
            Page.Visible = true
            self.CurrentPage = Page
            self:Notify(name.." Selected")
        end)

        if not self.CurrentPage then
            Page.Visible = true
            self.CurrentPage = Page
        end

        local TabAPI = {}

        -- Button
        function TabAPI:Button(txt, cb)
            local B = Instance.new("TextButton", Page)
            B.Size = UDim2.fromOffset(340,40)
            B.Text = txt
            B.Font = Enum.Font.GothamBold
            B.TextSize = 16
            B.TextColor3 = CurrentTheme
            B.BackgroundColor3 = Color3.fromRGB(15,15,15)
            Instance.new("UICorner", B).CornerRadius = UDim.new(0,10)
            B.MouseButton1Click:Connect(cb)
        end

        -- Toggle
        function TabAPI:Toggle(txt, default, cb)
            local Toggled = default or false
            local B = Instance.new("TextButton", Page)
            B.Size = UDim2.fromOffset(340,40)
            B.Text = txt.." : "..(Toggled and "ON" or "OFF")
            B.Font = Enum.Font.GothamBold
            B.TextSize = 16
            B.TextColor3 = Toggled and CurrentTheme or Color3.fromRGB(180,180,180)
            B.BackgroundColor3 = Color3.fromRGB(15,15,15)
            Instance.new("UICorner", B).CornerRadius = UDim.new(0,10)

            B.MouseButton1Click:Connect(function()
                Toggled = not Toggled
                B.Text = txt.." : "..(Toggled and "ON" or "OFF")
                B.TextColor3 = Toggled and CurrentTheme or Color3.fromRGB(180,180,180)
                cb(Toggled)
            end)
        end

        -- Slider
        function TabAPI:Slider(txt,min,max,def,cb)
            local Val = def or min
            local F = Instance.new("Frame", Page)
            F.Size = UDim2.fromOffset(340,50)
            F.BackgroundColor3 = Color3.fromRGB(15,15,15)
            Instance.new("UICorner", F).CornerRadius = UDim.new(0,10)

            local L = Instance.new("TextLabel", F)
            L.Text = txt.." : "..Val
            L.Font = Enum.Font.GothamBold
            L.TextSize = 14
            L.TextColor3 = CurrentTheme
            L.BackgroundTransparency = 1
            L.Size = UDim2.new(1,0,0,20)

            F.InputBegan:Connect(function(i)
                if i.UserInputType == Enum.UserInputType.MouseButton1 then
                    local X = i.Position.X - F.AbsolutePosition.X
                    local P = math.clamp(X/F.AbsoluteSize.X,0,1)
                    Val = math.floor(min + (max-min)*P)
                    L.Text = txt.." : "..Val
                    cb(Val)
                end
            end)
        end

        return TabAPI
    end

    return self
end

return DemonUI
